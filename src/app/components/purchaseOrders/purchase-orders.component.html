<form>
  <div class="form-group form-inline">
    Full text search: <input class="form-control ml-2" type="text" name="searchTerm" [(ngModel)]="service.searchTerm"/>
    <span class="ml-3" *ngIf="service.loading$ | async">Loading...</span>
  </div>

  <table class="table table-striped">
    <thead>
    <tr>
      <th> </th>
      <th scope="col" sortable="datetime" (sort)="onSort($event)">Datum</th>
      <th scope="col" sortable="isbn" (sort)="onSort($event)">Isbn</th>
      <th scope="col" sortable="description" (sort)="onSort($event)">Beschrijving</th>
      <th scope="col" sortable="author" (sort)="onSort($event)">Auteur</th>
      <th scope="col" sortable="book.uitgever" (sort)="onSort($event)">Uitgever</th>
      <th scope="col" sortable="amount" (sort)="onSort($event)">Aantal</th>
      <th scope="col" sortable="price" (sort)="onSort($event)">Prijs</th>
      <th scope="col" sortable="totalPrice" (sort)="onSort($event)">Totaal</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let purchaseOrder of purchaseOrders$ | async">
      <td>
        <img src="assets/delete-24px.svg" (click)="handleDete(purchaseOrder)"/>
      </td>
      <td>
        <ngb-highlight [result]="purchaseOrder.dateTime | date" [term]="2"></ngb-highlight>
      </td>
      <td>)
        <ng-container *ngIf="purchaseOrder.book.isbn != '0000000000000'">
          <ngb-highlight [result]="purchaseOrder.book.isbn" [term]="service.searchTerm"></ngb-highlight>
        </ng-container>
      </td>
      <td>
        <ngb-highlight [result]="purchaseOrder.description" [term]="service.searchTerm"></ngb-highlight>
      </td>
      <td>
        <ng-container *ngIf="purchaseOrder.book.isbn != '0000000000000'">
          <ngb-highlight [result]="purchaseOrder.book.author" [term]="service.searchTerm"></ngb-highlight>
        </ng-container>
      </td>
      <td>
        <ng-container *ngIf="purchaseOrder.book.isbn != '0000000000000'">
          <ngb-highlight [result]="purchaseOrder.book.publisher.publisher" [term]="service.searchTerm"></ngb-highlight>
        </ng-container>
      </td>
      <td>
        <ngb-highlight [result]="purchaseOrder.amount | number" [term]="service.searchTerm"></ngb-highlight>
      </td>
      <td>
        <ngb-highlight [result]="purchaseOrder.price | number:'1.2-2'" [term]="service.searchTerm"></ngb-highlight>
      </td>
      <td>
        <ngb-highlight [result]="purchaseOrder.totalPrice | number:'1.2-2'" [term]="service.searchTerm"></ngb-highlight>
      </td>
    </tr>
    </tbody>
  </table>

  <div class="d-flex justify-content-between p-2">
    <ngb-pagination [collectionSize]="(total$ | async)!" [(page)]="service.page" [maxSize]="5" [rotate]="true"
                    [boundaryLinks]="true"></ngb-pagination>

    <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
      <option [ngValue]="5">5 items per page</option>
      <option [ngValue]="10">10 items per page</option>
      <option [ngValue]="25">25 items per page</option>
    </select>
  </div>

</form>
